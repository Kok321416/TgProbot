# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–∞ –¥–ª—è GitHub Actions

## –ü—Ä–æ–±–ª–µ–º–∞
```
ssh: handshake failed: ssh: unable to authenticate
```

## –†–µ—à–µ–Ω–∏–µ

### 1. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
cat ~/.ssh/id_rsa.pub

# –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ authorized_keys
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
chmod 600 ~/.ssh/id_rsa
```

### 2. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub:

–û—Ç–∫—Ä–æ–π—Ç–µ: https://github.com/Kok321416/TgProbot/settings/secrets/actions

–î–æ–±–∞–≤—å—Ç–µ:
- **SERVER_HOST** ‚Äî IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `vps-3444` –∏–ª–∏ IP –∞–¥—Ä–µ—Å)
- **SERVER_USER** ‚Äî `root`
- **SERVER_SSH_KEY** ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–≤—Å—è —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ —Ü–µ–ª–∏–∫–æ–º):

```
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAACFwAAAAdzc2gtcn
...
–°–û–î–ï–†–ñ–ò–ú–û–ï –ö–õ–Æ–ß–ê
...
BA==
-----END OPENSSH PRIVATE KEY-----
```

- **SERVER_PORT** ‚Äî `22`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –µ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cat ~/.ssh/id_rsa.pub
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª—é—á —Ç–∏–ø–∞: `ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQ...`

### 4. –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh-keygen -t rsa -b 4096 -C "github-actions"

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
cat ~/.ssh/id_rsa.pub

# –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ authorized_keys
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é:

–° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
```bash
ssh -i –ø—É—Ç—å_–∫_–ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É_–∫–ª—é—á—É root@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä
```

## –í–∞–∂–Ω–æ!

1. **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á** (`id_rsa`) ‚Üí –≤ GitHub Secrets –∫–∞–∫ `SERVER_SSH_KEY`
2. **–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á** (`id_rsa.pub`) ‚Üí –≤ `~/.ssh/authorized_keys` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –ü—Ä–∞–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å: `chmod 600` –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ `chmod 700` –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub Actions —Å–º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É! üöÄ


